(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{58:function(e,r,t){e.exports=t(75)},63:function(e,r,t){},64:function(e,r,t){},75:function(e,r,t){"use strict";t.r(r);var n=t(0),o=t.n(n),a=t(50),c=t.n(a),i=(t(63),t(64),t(54)),u=t(17),s=t(24),d=t.n(s),l=t(30),p=t(28),f=t(6),g=t(3),v=t(27),m=t(78);var h=t(51);var b=function(e){var r=e.drawFunction,t=void 0===r?function(){}:r,a=e.height,c=void 0===a?500:a,i=e.width,u=void 0===i?500:i,s=e.canvasPixelRatio,d=void 0===s?2:s,l=e.style,p=void 0===l?{}:l,f=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=Object(n.useRef)(null);return Object(n.useEffect)(function(){var n=t.current,o=n.getContext("2d"),a=requestAnimationFrame(function(){o.clearRect(0,0,n.width,n.height),o.save(),o.scale(r,r),e(o),o.restore()});return function(){return cancelAnimationFrame(a)}},[e]),t}(t,d),v={width:"".concat(u,"px"),height:"".concat(c,"px")};return o.a.createElement("canvas",{width:u*d,height:c*d,style:Object(g.a)({},v,p),ref:f})},y=function(e){var r=e.canvasPixelRatio,t=void 0===r?2:r,n=e.canvasStyle,a=void 0===n?{}:n,c=e.canvasDrawFunction,i=void 0===c?function(){}:c,u=e.height,s=e.width,d=e.wrapperClassName,l=void 0===d?"canvasWrapper":d,p=e.wrapperSizeRef,f=e.wrapperStyle,v=void 0===f?{}:f;return o.a.createElement("div",{className:l,ref:p,style:Object(g.a)({position:"absolute",width:"100%",height:"100%"},v)},o.a.createElement(b,{canvasPixelRatio:t,width:s,height:u,drawFunction:i,style:a}))},A=t(76),N=function(e){var r=e.bandPaddingInner,t=void 0===r?.5:r,n=e.bandPaddingOuter,o=void 0===n?.7:n,a=e.isHangingBar,c=void 0===a||a,i=e.groupIndexPropName,u=void 0===i?"groupIndex":i,s=e.groupPropName,d=e.groupKeys,l=e.height,p=e.margin,f=void 0===p?{top:10,right:10,bottom:10,left:10}:p,g=e.nodeCount,m=e.radiusToPaddingRatio,h=void 0===m?.9:m,b=e.width,y=Object(v.a)().domain(d).range([f.left,b-f.right]).paddingInner([t]).paddingOuter([o]),A=function(e){var r=e.bandwidth,t=e.height,n=e.margin,o=e.maxNodesPerBar,a=r*(t-n.top-n.bottom)/o;return.5*Math.sqrt(a)}({bandwidth:y.bandwidth(),height:l,maxNodesPerBar:g,margin:f,width:b}),N=A*h,O=2*A,w=y.step()*y.paddingOuter(),E=Math.ceil(y.bandwidth()/O),S=[l-f.bottom,f.top],x=Object(v.b)().domain([0,l]).range(c?S.reverse():S);return{radiusAccessor:function(){return N},xAccessor:function(e){var r=Math.floor(e[u]%E)*O+A-w;return y(e[s])+r},xScale:y,yAccessor:function(e){var r=Math.ceil((e[u]+1)/E);return x(r*O)}}},O=t(77);var w=function(e,r){switch(r.type){case"SET_LAYOUT":return Object(g.a)({},e,r.payload);case"START_RENDER":return Object(g.a)({},e,{isRendering:!0});case"FINISH_RENDER":return Object(g.a)({},e,{isRendering:!1});default:throw new Error("Invalid action type in progressReducer")}},E=function(e){var r=e.bandPaddingInner,t=void 0===r?.1:r,a=e.bandPaddingOuter,c=void 0===a?.1:a,i=e.className,u=e.colorAccessor,s=e.groupPropName,d=e.groupKeys,l=e.groupLabels,v=e.isHangingBar,m=void 0===v||v,b=e.labelFont,E=void 0===b?"bold 1.1rem Arial":b,S=e.labelFontSecondary,x=void 0===S?"0.9rem Arial":S,P=e.nodes,j=e.margin,R=void 0===j?{top:60,right:20,bottom:10,left:20}:j,I=e.radiusToPaddingRatio,T=void 0===I?.8:I,M=e.uniqueIdPropName,D=e.wrapperStyle,F=Object(h.a)(),C=Object(p.a)(F,3),k=C[0],_=C[1],K=C[2],B=Object(n.useReducer)(w,{nodeCount:0,radiusAccessor:function(){return 1},xAccessor:function(){return 0},xScale:function(){return 0},yAccessor:function(){return 0},isRendering:!1}),L=Object(p.a)(B,2),q=L[0],J=L[1];Object(n.useEffect)(function(){var e=N({bandPaddingInner:t,bandPaddingOuter:c,isHangingBar:m,groupIndexPropName:H,groupKeys:d,groupPropName:s,margin:R,nodeCount:P.length,width:_,height:K,radiusToPaddingRatio:T}),r=e.radiusAccessor,n=e.xAccessor,o=e.xScale,a=e.yAccessor;J({type:"SET_LAYOUT",payload:{nodeCount:P.length,radiusAccessor:r,xAccessor:n,xScale:o,yAccessor:a}})},[_,K,d,m,q.nodeCount]);var U=function(e){var r=e.nodes,t=e.uniqueIdPropName,n=void 0===t?"uniqueId":t,o=e.groupPropName,a=e.groupIndexPropName,c=void 0===a?"groupIndex":a,i=e.groupKeys,u=Array.isArray(i)?i.reduce(function(e,r){return Object(g.a)({},e,Object(f.a)({},r,0))},{}):{};return{nodes:Object(A.a)(r,function(e,r,t){var a,i=r[o],s=r[n],d=void 0===s?t:s;u[i]||(u[i]=0);var l=u[i]++;return e[d]=Object(g.a)({},r,(a={},Object(f.a)(a,n,d),Object(f.a)(a,c,l),Object(f.a)(a,o,i),a)),e},{}),groupCounts:u,groupIndexPropName:c}}({groupPropName:s,groupKeys:d,nodes:P,uniqueIdPropName:M}),W=U.nodes,G=U.groupCounts,H=U.groupIndexPropName,z=function(e){var r=e.nodes,t=e.colorAccessor,n=e.radiusAccessor,o=e.strokeColor,a=void 0===o?"#aaa":o,c=e.strokeWidth,i=void 0===c?"2":c,u=e.strokeLineJoin,s=void 0===u?"round":u,d=e.xAccessor,l=e.yAccessor;return function(e){Object(O.a)(r,function(r){var o=n(r),c=d(r),u=l(r),p=new Path2D(function(e,r,t){var n=e-t+","+r,o="A"+t+","+t+",0,1,1,";return"M"+n+o+(e+t)+","+r+o+n+"Z"}(c,u,o));e.strokeStyle=a,e.lineWidth=i,e.lineJoin=s,e.stroke(p),e.fillStyle=t(r),e.fill(p)})}}({nodes:W,colorAccessor:u,radiusAccessor:q.radiusAccessor,xAccessor:q.xAccessor,yAccessor:q.yAccessor}),Q=function(e){var r=e.colorAccessor,t=e.font,n=void 0===t?"30px Arial":t,o=e.fontSecondary,a=void 0===o?"20px Arial":o,c=e.fontStrokeStyle,i=void 0===c?"#aaa":c,u=e.fontOutlineWidth,s=void 0===u?.25:u,d=e.groupCounts,l=e.groupKeys,p=e.labels,f=e.xAccessor,g=e.yAccessor,v=e.numberOffset,m=void 0===v?20:v;return function(e){var t=[],o=0;d&&(t=Object.values(d),o=t.reduce(function(e,r){return e+r},0)),l.length===p.length&&l.forEach(function(c,u){var d=f(c),l=g(c),v=r(c);if(e.font=n,e.fillStyle=v,e.textAlign="center",e.textBaseline="middle",e.fillText(p[u],d,l),e.lineWidth=s,e.strokeStyle=i,e.strokeText(p[u],d,l),t.length===p.length){var h=t[u]/o*100,b=h<1?h.toPrecision(1):Math.round(h),y="".concat(b,"% (").concat(t[u],")");e.font=a,e.fillText(y,d,l+m),e.strokeText(y,d,l+m)}})}}({colorAccessor:u,font:E,fontSecondary:x,groupCounts:G,groupKeys:d,labels:l,xAccessor:function(e){return q.xScale(e)-q.xScale.step()*q.xScale.paddingOuter()+q.xScale.bandwidth()/2},yAccessor:function(){return R.top/3},numberOffset:R.top/3+5});return o.a.createElement(y,{canvasDrawFunction:function(e){J({type:"START_RENDER"}),z(e),Q(e),J({type:"FINISH_RENDER"})},canvasStyle:{background:"#fff"},width:_,height:K,wrapperClassName:i,wrapperSizeRef:k,wrapperStyle:D})},S=t(57),x=function(){var e=Object(l.a)(d.a.mark(function e(r){var t,n,o,a,c,i,u;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.nNodes,n=void 0===t?2e4:t,o=r.groupPropName,a=void 0===o?"id":o,e.next=3,Object(S.a)("id,label,sort_order,color\nD,DONE,7,#2ECC71\nE,RECOVERABLE,5,#F1948A\nF,FATAL,6,#E74C3C\nG,REGISTERED,1,#D6EAF8\nI,INSTANTIATED,3,#5DADE2\nQ,QUEUED,2,#3498DB\nR,RUNNING,4,#ebd857");case 3:return c=e.sent,i=Array.isArray(c)?c.sort(function(e,r){return e.sort_order-r.sort_order}):[],u=new Array(n).fill({}).map(function(e,r){return Object(f.a)({uniqueId:r},a,i[0][a])}),e.abrupt("return",{nodes:u,groupMetadataArray:i});case 7:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}(),P=function(e,r,t){var n=Math.floor(50*Math.random()),o=new Array(n).fill(0).map(function(){return Math.floor(Math.random()*e.length)});return e.map(function(e,n){if(o.includes(n)){var a=r.findIndex(function(r){return r===e[t]}),c=a;if("E"===r[a])c=1;else if("F"===r[a])c=a;else if("R"===r[a]){var i=Math.random()<=.05?a+2:a+1;c=Math.random()<=.1?i:r.length-1}else c=a<r.length-2?a+1:r.length-1;return Object(g.a)({},e,Object(f.a)({},t,r[c]))}return Object(g.a)({},e)})},j=function(e,r){switch(r.type){case"SET_NODES":return Object(g.a)({},e,{nodes:r.payload});case"SET_GROUP_METADATA":var t=r.payload,n=t.colorPropName,o=t.groupMetadataArray,a=t.groupPropName,c=t.labelPropName,i=o.reduce(function(e,r){return Object(g.a)({},e,Object(f.a)({},r[a],r))},{}),u=o.map(function(e){return e[n]}),s=o.map(function(e){return e[a]}),d=o.map(function(e){return e[c]}),l=Object(v.c)().domain(s).range(u);return Object(g.a)({},e,{colorAccessor:function(e){return Object(m.a)(e,a)?l(e[a]):l(e)},groupMetadata:i,groupKeys:s,groupLabels:d});default:throw new Error("Invalid action type in jobStateReducer")}},R=function(e){var r=e.className,t=e.groupPropName,a=void 0===t?"id":t,c=e.colorPropName,i=void 0===c?"color":c,u=e.labelPropName,s=void 0===u?"label":u,f=e.labelFont,g=void 0===f?"bold 1.1em Arial":f,v=e.labelFontSecondary,m=void 0===v?"0.9em Arial":v,h=e.margin,b=void 0===h?{top:60,right:20,bottom:10,left:20}:h,y=e.nNodes,A=void 0===y?2e3:y,N=e.nodesMetadataPromise,O=void 0===N?x.bind(null,{nNodes:A,groupPropName:a}):N,w=e.pollingInterval,S=void 0===w?500:w,R=e.wrapperStyle,I=void 0===R?{height:"100%",width:"100%"}:R,T=Object(n.useReducer)(j,{colorAccessor:function(){return"#fff"},groupMetadata:{},groupKeys:[],groupLabels:[],nodes:[]}),M=Object(p.a)(T,2),D=M[0],F=M[1];return Object(n.useEffect)(function(){function e(){return(e=Object(l.a)(d.a.mark(function e(){var r,t,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:r=e.sent,t=r.groupMetadataArray,n=r.nodes,F({type:"SET_GROUP_METADATA",payload:{colorPropName:i,groupPropName:a,groupMetadataArray:t,labelPropName:s}}),F({type:"SET_NODES",payload:n});case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),function(e,r){var t=Object(n.useRef)();Object(n.useEffect)(function(){t.current=e},[e]),Object(n.useEffect)(function(){if(null!==r){var e=setInterval(function(){t.current()},r);return function(){return clearInterval(e)}}},[r])}(function(){F({type:"SET_NODES",payload:P(D.nodes,D.groupKeys,a)})},S),o.a.createElement(E,{className:r,colorAccessor:D.colorAccessor,groupPropName:a,groupCounts:D.groupKeys.length,groupKeys:D.groupKeys,groupLabels:D.groupLabels,labelFont:g,labelFontSecondary:m,nodes:D.nodes,margin:b,uniqueIdPropName:!0,wrapperStyle:I})},I=function(e){var r=e.match,t=r.params.nNodes?Number(r.params.nNodes):1e3;return o.a.createElement("div",{className:"App"},o.a.createElement("h2",{className:"Job-status-title"},"Job Status Monitor for ",t," nodes"),o.a.createElement("div",{className:"Job-status-graph-container"},o.a.createElement(R,{className:"Job-status-graph",labelFont:"700 1.1rem Nunito",labelFontSecondary:"700 0.9rem Nunito",margin:{top:60,right:20,bottom:20,left:20},nNodes:t,pollingInterval:500,wrapperStyle:{height:"80%",width:"80%"}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(function(){return o.a.createElement(i.a,null,["/:nNodes",""].map(function(e,r){return o.a.createElement(u.a,{key:r,path:e,component:I})}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[58,1,2]]]);
//# sourceMappingURL=main.6012ba32.chunk.js.map