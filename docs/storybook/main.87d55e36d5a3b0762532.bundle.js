(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return ResponsiveCanvas});var _Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_Canvas2d__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(68);function ResponsiveCanvas(_ref){var click=_ref.click,_ref$canvasPixelRatio=_ref.canvasPixelRatio,canvasPixelRatio=void 0===_ref$canvasPixelRatio?2:_ref$canvasPixelRatio,_ref$canvasStyle=_ref.canvasStyle,canvasStyle=void 0===_ref$canvasStyle?{}:_ref$canvasStyle,_ref$canvasDrawFuncti=_ref.canvasDrawFunction,canvasDrawFunction=void 0===_ref$canvasDrawFuncti?function(){}:_ref$canvasDrawFuncti,eventCanvasDrawFunction=_ref.eventCanvasDrawFunction,_ref$eventCanvasStyle=_ref.eventCanvasStyle,eventCanvasStyle=void 0===_ref$eventCanvasStyle?{position:"absolute",top:0,left:0,opacity:0}:_ref$eventCanvasStyle,height=_ref.height,mousemove=_ref.mousemove,mousedown=_ref.mousedown,mouseup=_ref.mouseup,touchend=_ref.touchend,touchmove=_ref.touchmove,touchstart=_ref.touchstart,width=_ref.width,_ref$wrapperClassName=_ref.wrapperClassName,wrapperClassName=void 0===_ref$wrapperClassName?"canvasWrapper":_ref$wrapperClassName,wrapperSizeRef=_ref.wrapperSizeRef,_ref$wrapperStyle=_ref.wrapperStyle,wrapperStyle=void 0===_ref$wrapperStyle?{}:_ref$wrapperStyle,touchCanvas=eventCanvasDrawFunction?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Canvas2d__WEBPACK_IMPORTED_MODULE_2__.a,{canvasPixelRatio:canvasPixelRatio,width:width,height:height,drawFunction:eventCanvasDrawFunction,style:Object(_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({},canvasStyle,eventCanvasStyle),touchstart:touchstart,touchmove:touchmove,touchend:touchend,mousemove:mousemove,mousedown:mousedown,mouseup:mouseup,click:click}):"",touchStyles=eventCanvasDrawFunction?{pointerEvents:"none"}:{};return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:wrapperClassName,ref:wrapperSizeRef,style:Object(_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({position:"absolute",width:"100%",height:"100%"},wrapperStyle)},touchCanvas,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Canvas2d__WEBPACK_IMPORTED_MODULE_2__.a,{canvasPixelRatio:canvasPixelRatio,width:width,height:height,drawFunction:canvasDrawFunction,style:Object(_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({},canvasStyle,touchStyles)}))}ResponsiveCanvas.__docgenInfo={description:"",methods:[],displayName:"ResponsiveCanvas"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Canvas/ResponsiveCanvas.js"]={name:"ResponsiveCanvas",docgenInfo:ResponsiveCanvas.__docgenInfo,path:"src/components/Canvas/ResponsiveCanvas.js"})},116:function(module,__webpack_exports__,__webpack_require__){"use strict";var slicedToArray=__webpack_require__(28),react=__webpack_require__(0),react_default=__webpack_require__.n(react),bundle_esm=__webpack_require__(102),useInterval=__webpack_require__(80),Canvas2d=__webpack_require__(68),ResponsiveCanvas=__webpack_require__(103),objectSpread=__webpack_require__(2),drawSquareAtAngle=function drawSquareAtAngle(ctx,_ref){var width=_ref.width,height=_ref.height,angle=_ref.angle,shorter=Math.min(width,height);ctx.save(),ctx.beginPath(),ctx.translate(width/2,height/2),ctx.rotate(angle*Math.PI/180),ctx.fillStyle="#4397AC",ctx.fillRect(-shorter/4,-shorter/4,shorter/2,shorter/2),ctx.restore()},utils_rotateReducer=function rotateReducer(state,action){switch(action.type){case"ROTATE":return Object(objectSpread.a)({},state,{angle:state.angle+(action.rotation||1)});default:throw new Error("Invalid action type in rotateReducer")}};__webpack_require__.d(__webpack_exports__,"a",function(){return Canvas_BaseSquare}),__webpack_require__.d(__webpack_exports__,"c",function(){return Canvas_SpinningSquare}),__webpack_require__.d(__webpack_exports__,"b",function(){return Canvas_ResponsiveSpinningSquare});var Canvas_BaseSquare=function BaseSquare(_ref){var _ref$angle=_ref.angle,angle=void 0===_ref$angle?0:_ref$angle,_ref$width=_ref.width,width=void 0===_ref$width?500:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?500:_ref$height;return react_default.a.createElement(Canvas2d.a,{width:width,height:height,drawFunction:function drawFunction(ctx){return drawSquareAtAngle(ctx,{width:width,height:height,angle:angle})}})},Canvas_SpinningSquare=function SpinningSquare(_ref2){var _ref2$width=_ref2.width,width=void 0===_ref2$width?700:_ref2$width,_ref2$height=_ref2.height,height=void 0===_ref2$height?700:_ref2$height,_useReducer=Object(react.useReducer)(utils_rotateReducer,{angle:0}),_useReducer2=Object(slicedToArray.a)(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];return Object(useInterval.a)(function(){dispatch({type:"ROTATE",rotation:.5})},10),react_default.a.createElement(Canvas2d.a,{width:width,height:height,drawFunction:function drawFunction(ctx){return drawSquareAtAngle(ctx,{angle:state.angle,width:width,height:height})}})},Canvas_ResponsiveSpinningSquare=function ResponsiveSpinningSquare(){var _useResizeObserver=Object(bundle_esm.a)(),_useResizeObserver2=Object(slicedToArray.a)(_useResizeObserver,3),sizeRef=_useResizeObserver2[0],width=_useResizeObserver2[1],height=_useResizeObserver2[2],_useReducer3=Object(react.useReducer)(utils_rotateReducer,{angle:0}),_useReducer4=Object(slicedToArray.a)(_useReducer3,2),state=_useReducer4[0],dispatch=_useReducer4[1];return Object(useInterval.a)(function(){dispatch({type:"ROTATE",rotation:.5})},10),react_default.a.createElement("div",{style:{position:"absolute",width:700,height:700,resize:"both",overflow:"auto",border:"1px solid black"}},react_default.a.createElement(ResponsiveCanvas.a,{canvasPixelRatio:2,canvasStyle:{},canvasDrawFunction:function canvasDrawFunction(ctx){return drawSquareAtAngle(ctx,{angle:state.angle,width:width,height:height})},width:width,height:height,wrapperClassName:"spinningResponsiveCanvas",wrapperSizeRef:sizeRef,wrapperStyle:{}}))};Canvas_BaseSquare.__docgenInfo={description:"",methods:[],displayName:"BaseSquare"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/Canvas/index.js"]={name:"BaseSquare",docgenInfo:Canvas_BaseSquare.__docgenInfo,path:"src/stories/Canvas/index.js"}),Canvas_SpinningSquare.__docgenInfo={description:"",methods:[],displayName:"SpinningSquare"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/Canvas/index.js"]={name:"SpinningSquare",docgenInfo:Canvas_SpinningSquare.__docgenInfo,path:"src/stories/Canvas/index.js"}),Canvas_ResponsiveSpinningSquare.__docgenInfo={description:"",methods:[],displayName:"ResponsiveSpinningSquare"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/Canvas/index.js"]={name:"ResponsiveSpinningSquare",docgenInfo:Canvas_ResponsiveSpinningSquare.__docgenInfo,path:"src/stories/Canvas/index.js"})},210:function(module,exports,__webpack_require__){__webpack_require__(211),__webpack_require__(297),module.exports=__webpack_require__(298)},298:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(79);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(function loadStories(){__webpack_require__(374)},module)}.call(this,__webpack_require__(77)(module))},30:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return getDemoMetaDataAndNodes}),__webpack_require__.d(__webpack_exports__,"b",function(){return getFakeProgress});var _Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(66),_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(17),_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(104),d3_dsv__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(209),getDemoMetaDataAndNodes=function(){var _ref2=Object(_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(_ref){var _ref$metadataCsv,metadataCsv,_ref$nNodes,nNodes,_ref$groupPropName,groupPropName,statusCSV,jobStatusMetaData,nodes;return _Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _ref$metadataCsv=_ref.metadataCsv,metadataCsv=void 0===_ref$metadataCsv?"group_id,label,sort_order,color\nD,DONE,7,#2ECC71\nE,RECOVERABLE,5,#F1948A\nF,FATAL,6,#E74C3C\nG,REGISTERED,1,#D6EAF8\nI,INSTANTIATED,3,#5DADE2\nQ,QUEUED,2,#3498DB\nR,RUNNING,4,#ebd857":_ref$metadataCsv,_ref$nNodes=_ref.nNodes,nNodes=void 0===_ref$nNodes?2e4:_ref$nNodes,_ref$groupPropName=_ref.groupPropName,groupPropName=void 0===_ref$groupPropName?"group_id":_ref$groupPropName,_context.next=3,Object(d3_dsv__WEBPACK_IMPORTED_MODULE_4__.a)(metadataCsv);case 3:return statusCSV=_context.sent,jobStatusMetaData=Array.isArray(statusCSV)?statusCSV.sort(function(a,b){return a.sort_order-b.sort_order}):[],nodes=new Array(nNodes).fill({}).map(function(node,i){var _ref3;return _ref3={unique_id:"id_".concat(i+1)},Object(_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_ref3,groupPropName,jobStatusMetaData[0][groupPropName]),Object(_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(_ref3,"some_other_prop","with a very long name"),_ref3}),_context.abrupt("return",{nodes:nodes,groupMetadataArray:jobStatusMetaData});case 7:case"end":return _context.stop()}},_callee)}));return function getDemoMetaDataAndNodes(_x){return _ref2.apply(this,arguments)}}(),getFakeProgress=function getFakeProgress(nodes,groupKeys,groupPropName){var numberToAdvance=Math.floor(50*Math.random()),indicesToAdvance=new Array(numberToAdvance).fill(0).map(function(){return Math.floor(Math.random()*nodes.length)});return nodes.map(function(node,index){if(indicesToAdvance.includes(index)){var groupIndex=groupKeys.findIndex(function(key){return key===node[groupPropName]}),nextGroupIndex=groupIndex;if("E"===groupKeys[groupIndex])nextGroupIndex=1;else if("F"===groupKeys[groupIndex])nextGroupIndex=groupIndex;else if("R"===groupKeys[groupIndex]){var randomErrorState=Math.random()<=.05?groupIndex+2:groupIndex+1;nextGroupIndex=Math.random()<=.1?randomErrorState:groupKeys.length-1}else nextGroupIndex=groupIndex<groupKeys.length-2?groupIndex+1:groupKeys.length-1;return Object(_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({},node,Object(_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},groupPropName,groupKeys[nextGroupIndex]))}return Object(_Users_ryshack_CODE_jobstatus_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({},node)})}},374:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(79),_Canvas__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(116),_containers_JobStatus_JobStatus__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(47),_containers_JobStatus_demoDataGenerator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(30);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("Canvas",module).add("Canvas Fixed",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,"A 2d canvas that takes a drawFunction and internally resizes the canvas increase resolution"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h3",null,"With much help from ",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a",{href:"https://philna.sh/blog/2018/09/27/techniques-for-animating-on-the-canvas-in-react/"},"this article")),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Canvas__WEBPACK_IMPORTED_MODULE_2__.a,null))}).add("Canvas Spinning",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,"A 2d canvas that takes a drawFunction and resizes the canvas to increase resolution"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h3",null,"Spinning canvas example from ",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a",{href:"https://codepen.io/philnash/pen/QVeOrd"},"this Pen")),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Canvas__WEBPACK_IMPORTED_MODULE_2__.c,null))}).add("Responsive Canvas Spinning",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,"A responsive 2d canvas that takes a drawFunction and resizes the canvas to increase resolution"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h3",null,"Try Resizing the Canvas (or really the wrapper around the canvas div)"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Canvas__WEBPACK_IMPORTED_MODULE_2__.b,null))});var metaDataWhiteOutlined="group_id,label,sort_order,color\nG,REGISTERED,1,#fff\nQ,QUEUED,2,#fff\nI,INSTANTIATED,3,#fff\nR,RUNNING,4,#fff\nE,RECOVERABLE,5,#fff\nF,FATAL,6,#fff\nD,DONE,7,#fff";Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("JobStatus",module).add("...showing mouse event canvas",function(){var nodesMetadataPromise=_containers_JobStatus_demoDataGenerator__WEBPACK_IMPORTED_MODULE_4__.a.bind(null,{metadataCsv:metaDataWhiteOutlined,nNodes:1e3,groupPropName:"group_id"});return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,"Job monitoring prototype"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4",null,"Showing only the hidden mouse event canvas, which color each node, slightly differently to uniquely identify each node by pixel color."),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_containers_JobStatus_JobStatus__WEBPACK_IMPORTED_MODULE_3__.a,{canvasStyle:{background:"transparent",opacity:0},colorPropName:"color",fontStrokeColor:"#737373",eventCanvasStyle:{position:"absolute",top:0,left:0,opacity:1},fontStrokeWidth:.1,groupPropName:"group_id",labelPropName:"label",nodesMetadataPromise:nodesMetadataPromise,uniqueIdPropName:"unique_id",wrapperStyle:{height:"80%",width:"90%"}}))}).add("...white circles",function(){var nodesMetadataPromise=_containers_JobStatus_demoDataGenerator__WEBPACK_IMPORTED_MODULE_4__.a.bind(null,{metadataCsv:metaDataWhiteOutlined,nNodes:1e3,groupPropName:"group_id"});return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,"Job Monitoring Prototype"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4",null,"No color."),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_containers_JobStatus_JobStatus__WEBPACK_IMPORTED_MODULE_3__.a,{circleStrokeColor:"#aaa",circleStrokeWidth:2.5,colorPropName:"color",fontStrokeColor:"#737373",fontStrokeWidth:.1,groupPropName:"group_id",labelColorAccessor:function labelColorAccessor(){return"#737373"},labelPropName:"label",nodesMetadataPromise:nodesMetadataPromise,uniqueIdPropName:"unique_id",wrapperStyle:{height:"80%",width:"90%"}}))}).add("...grayscale: done in white",function(){var nodesMetadataPromise=_containers_JobStatus_demoDataGenerator__WEBPACK_IMPORTED_MODULE_4__.a.bind(null,{metadataCsv:"group_id,label,sort_order,color\nG,REGISTERED,1,#bdbdbd\nQ,QUEUED,2,#969696\nI,INSTANTIATED,3,#737373\nR,RUNNING,4,#f7f7f7\nE,RECOVERABLE,5,#525252\nF,FATAL,6,#252525\nD,DONE,7,#fff",nNodes:1e3,groupPropName:"group_id"});return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,"Job Monitoring Prototype"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4",null,"Grayscale."),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_containers_JobStatus_JobStatus__WEBPACK_IMPORTED_MODULE_3__.a,{circleStrokeColor:"#aaa",circleStrokeWidth:1,colorPropName:"color",fontStrokeColor:"#aaa",fontStrokeWidth:.75,groupPropName:"group_id",labelPropName:"label",nodesMetadataPromise:nodesMetadataPromise,uniqueIdPropName:"unique_id",wrapperStyle:{height:"80%",width:"90%"}}))}).add("...grayscale: running and done in color",function(){var nodesMetadataPromise=_containers_JobStatus_demoDataGenerator__WEBPACK_IMPORTED_MODULE_4__.a.bind(null,{metadataCsv:"group_id,label,sort_order,color\nG,REGISTERED,1,#bdbdbd\nQ,QUEUED,2,#969696\nI,INSTANTIATED,3,#737373\nR,RUNNING,4,#F0C808\nE,RECOVERABLE,5,#525252\nF,FATAL,6,#252525\nD,DONE,7,#59A96A",nNodes:1e3,groupPropName:"group_id"});return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,"Job Monitoring Prototype"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4",null,"Grayscale + two colors."),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_containers_JobStatus_JobStatus__WEBPACK_IMPORTED_MODULE_3__.a,{circleStrokeColor:"#aaa",circleStrokeWidth:.25,colorPropName:"color",fontStrokeColor:"#aaa",fontStrokeWidth:.25,groupPropName:"group_id",labelPropName:"label",nodesMetadataPromise:nodesMetadataPromise,uniqueIdPropName:"unique_id",wrapperStyle:{height:"80%",width:"90%"}}))}).add("...grayscale: highlight running, done, error in color",function(){var nodesMetadataPromise=_containers_JobStatus_demoDataGenerator__WEBPACK_IMPORTED_MODULE_4__.a.bind(null,{metadataCsv:"group_id,label,sort_order,color\nG,REGISTERED,1,#bdbdbd\nQ,QUEUED,2,#bdbdbd\nI,INSTANTIATED,3,#bdbdbd\nR,RUNNING,4,#F0C808\nE,RECOVERABLE,5,#F1948A\nF,FATAL,6,#E74C3C\nD,DONE,7,#59A96A",nNodes:1e3,groupPropName:"group_id"});return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,"Job Monitoring Prototype"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4",null,"Grayscale + 4 colors"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_containers_JobStatus_JobStatus__WEBPACK_IMPORTED_MODULE_3__.a,{circleStrokeColor:"#aaa",circleStrokeWidth:.25,colorPropName:"color",fontStrokeColor:"#aaa",fontStrokeWidth:.25,groupPropName:"group_id",labelPropName:"label",nodesMetadataPromise:nodesMetadataPromise,uniqueIdPropName:"unique_id",wrapperStyle:{height:"80%",width:"90%"}}))}).add("...fully colored",function(){var nodesMetadataPromise=_containers_JobStatus_demoDataGenerator__WEBPACK_IMPORTED_MODULE_4__.a.bind(null,{nNodes:1e3,groupPropName:"group_id"});return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,"Job Monitoring Prototype"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4",null,"Fully colored"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_containers_JobStatus_JobStatus__WEBPACK_IMPORTED_MODULE_3__.a,{colorPropName:"color",groupPropName:"group_id",labelPropName:"label",nodesMetadataPromise:nodesMetadataPromise,uniqueIdPropName:"unique_id",wrapperStyle:{height:"80%",width:"90%"}}))})}.call(this,__webpack_require__(77)(module))},47:function(module,__webpack_exports__,__webpack_require__){"use strict";var regenerator=__webpack_require__(66),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(104),slicedToArray=__webpack_require__(28),defineProperty=__webpack_require__(17),objectSpread=__webpack_require__(2),src=__webpack_require__(82),has=__webpack_require__(381),react=__webpack_require__(0),react_default=__webpack_require__.n(react),useInterval=__webpack_require__(80),omit=__webpack_require__(377),reduce=__webpack_require__(378),map=__webpack_require__(380),bundle_esm=__webpack_require__(102),ResponsiveCanvas=__webpack_require__(103);function Tooltip(_ref){var borderWidth=_ref.borderWidth,opacity=_ref.opacity,content=_ref.content,contentWidth=_ref.contentWidth,left=_ref.left,font=_ref.font,padding=_ref.padding,top=_ref.top;return react_default.a.createElement("div",{className:"tooltipWrapper",style:{position:"absolute",opacity:opacity,top:"".concat(top,"px"),left:"".concat(left,"px")}},react_default.a.createElement("span",{className:"tooltipArrow",style:{content:"",position:"absolute",bottom:"100%",left:"50%",borderWidth:"-".concat(borderWidth,"px"),borderStyle:"solid",borderColor:"transparent transparent #999 transparent"}}),react_default.a.createElement("span",{className:"tooltipContent",style:{position:"absolute",padding:"".concat(padding,"px"),width:"".concat(contentWidth,"px"),top:"100%",left:"50%",marginLeft:"-".concat(contentWidth/2,"px"),font:font,color:"#000",backgroundColor:"#fff",border:"2px solid #999",borderRadius:"5px",pointerEvents:"none",opacity:1,zIndex:1}},content))}Tooltip.__docgenInfo={description:"",methods:[],displayName:"Tooltip"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Tooltip/Tooltip.js"]={name:"Tooltip",docgenInfo:Tooltip.__docgenInfo,path:"src/components/Tooltip/Tooltip.js"});var computeIndexedNodes=function(_ref){var nodes=_ref.nodes,_ref$uniqueIdPropName=_ref.uniqueIdPropName,uniqueIdPropName=void 0===_ref$uniqueIdPropName?"uniqueId":_ref$uniqueIdPropName,groupPropName=_ref.groupPropName,_ref$groupIndexPropNa=_ref.groupIndexPropName,groupIndexPropName=void 0===_ref$groupIndexPropNa?"groupIndex":_ref$groupIndexPropNa,groupKeys=_ref.groupKeys,groupCounts=Array.isArray(groupKeys)?groupKeys.reduce(function(acc,key){return Object(objectSpread.a)({},acc,Object(defineProperty.a)({},key,0))},{}):{},colorToNode={},nodeIdToColor={},indexed=Object(reduce.a)(nodes,function(acc,node,index){var _objectSpread3,group=node[groupPropName],_node$uniqueIdPropNam=node[uniqueIdPropName],id=void 0===_node$uniqueIdPropNam?index:_node$uniqueIdPropNam;groupCounts[group]||(groupCounts[group]=0);var groupIndex=groupCounts[group]++,color=function uniqueColor(index){return index<16777215?"rgb(".concat(255&index,",").concat((65280&index)>>8,",").concat((16711680&index)>>16,")"):""}(index+1);return colorToNode[color]=node,nodeIdToColor[id]=color,acc[id]=Object(objectSpread.a)({},node,(_objectSpread3={},Object(defineProperty.a)(_objectSpread3,uniqueIdPropName,id),Object(defineProperty.a)(_objectSpread3,groupIndexPropName,groupIndex),Object(defineProperty.a)(_objectSpread3,groupPropName,group),_objectSpread3)),acc},{});return{colorToNode:colorToNode,nodes:indexed,groupCounts:groupCounts,groupIndexPropName:groupIndexPropName,nodeIdToColor:nodeIdToColor}},computeLayout=function(_ref2){var _ref2$bandPaddingInne=_ref2.bandPaddingInner,bandPaddingInner=void 0===_ref2$bandPaddingInne?.5:_ref2$bandPaddingInne,_ref2$bandPaddingOute=_ref2.bandPaddingOuter,bandPaddingOuter=void 0===_ref2$bandPaddingOute?.7:_ref2$bandPaddingOute,_ref2$isHangingBar=_ref2.isHangingBar,isHangingBar=void 0===_ref2$isHangingBar||_ref2$isHangingBar,_ref2$groupIndexPropN=_ref2.groupIndexPropName,groupIndexPropName=void 0===_ref2$groupIndexPropN?"groupIndex":_ref2$groupIndexPropN,groupPropName=_ref2.groupPropName,groupKeys=_ref2.groupKeys,height=_ref2.height,_ref2$margin=_ref2.margin,margin=void 0===_ref2$margin?{top:10,right:10,bottom:10,left:10}:_ref2$margin,nodeCount=_ref2.nodeCount,_ref2$radiusToPadding=_ref2.radiusToPaddingRatio,radiusToPaddingRatio=void 0===_ref2$radiusToPadding?.9:_ref2$radiusToPadding,width=_ref2.width,xScale=Object(src.a)().domain(groupKeys).range([margin.left,width-margin.right]).paddingInner([bandPaddingInner]).paddingOuter([bandPaddingOuter]),radiusWithPadding=function optRadius(_ref){var bandwidth=_ref.bandwidth,height=_ref.height,margin=_ref.margin,maxNodesPerBar=_ref.maxNodesPerBar,areaPerSquare=bandwidth*(height-margin.top-margin.bottom)/maxNodesPerBar;return.5*Math.sqrt(areaPerSquare)}({bandwidth:xScale.bandwidth(),height:height,maxNodesPerBar:nodeCount,margin:margin,width:width}),radius=radiusWithPadding*radiusToPaddingRatio,diameter=2*radiusWithPadding,outerSpace=xScale.step()*xScale.paddingOuter(),nNodesPerRow=Math.ceil(xScale.bandwidth()/diameter),yRange=[height-margin.bottom,margin.top],yScale=Object(src.b)().domain([0,height]).range(isHangingBar?yRange.reverse():yRange);return{radiusWithPadding:radiusWithPadding,radiusAccessor:function radiusAccessor(){return radius},xAccessor:function xAccessor(node){var xOff=Math.floor(node[groupIndexPropName]%nNodesPerRow)*diameter+radiusWithPadding-outerSpace;return xScale(node[groupPropName])+xOff},xScale:xScale,yAccessor:function yAccessor(node){var rowN=Math.ceil((node[groupIndexPropName]+1)/nNodesPerRow);return yScale(rowN*diameter)}}},forEach=__webpack_require__(379);var drawDotBarFunction=function(_ref){var nodes=_ref.nodes,colorAccessor=_ref.colorAccessor,radiusAccessor=_ref.radiusAccessor,_ref$strokeColorAcces=_ref.strokeColorAccessor,strokeColorAccessor=void 0===_ref$strokeColorAcces?function(){return"#aaa"}:_ref$strokeColorAcces,_ref$strokeWidth=_ref.strokeWidth,strokeWidth=void 0===_ref$strokeWidth?"2":_ref$strokeWidth,_ref$strokeLineJoin=_ref.strokeLineJoin,strokeLineJoin=void 0===_ref$strokeLineJoin?"round":_ref$strokeLineJoin,xAccessor=_ref.xAccessor,yAccessor=_ref.yAccessor;return function(ctx){Object(forEach.a)(nodes,function(d){var path2=new Path2D(function circlePath(x,y,radius){var l=x-radius+","+y,pre="A"+radius+","+radius+",0,1,1,";return"M"+l+pre+(x+radius)+","+y+pre+l+"Z"}(xAccessor(d),yAccessor(d),radiusAccessor(d)));strokeWidth>0&&(ctx.strokeStyle=strokeColorAccessor(d),ctx.lineWidth=strokeWidth,ctx.lineJoin=strokeLineJoin,ctx.stroke(path2)),ctx.fillStyle=colorAccessor(d),ctx.fill(path2)})}},drawLabelsFunction=function(_ref){var colorAccessor=_ref.colorAccessor,_ref$font=_ref.font,font=void 0===_ref$font?"30px Arial":_ref$font,_ref$fontSecondary=_ref.fontSecondary,fontSecondary=void 0===_ref$fontSecondary?"20px Arial":_ref$fontSecondary,_ref$fontStrokeColor=_ref.fontStrokeColor,fontStrokeColor=void 0===_ref$fontStrokeColor?"#aaa":_ref$fontStrokeColor,_ref$fontStrokeWidth=_ref.fontStrokeWidth,fontStrokeWidth=void 0===_ref$fontStrokeWidth?.25:_ref$fontStrokeWidth,groupCounts=_ref.groupCounts,groupKeys=_ref.groupKeys,labels=_ref.labels,xAccessor=_ref.xAccessor,yAccessor=_ref.yAccessor,_ref$numberOffset=_ref.numberOffset,numberOffset=void 0===_ref$numberOffset?20:_ref$numberOffset;return function(ctx){var counts=[],total=0;groupCounts&&(counts=Object.values(groupCounts),total=counts.reduce(function(sum,count){return sum+count},0)),groupKeys.length===labels.length&&groupKeys.forEach(function(group,i){var x=xAccessor(group),y=yAccessor(group),color=colorAccessor(group);if(ctx.font=font,ctx.fillStyle=color,ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText(labels[i],x,y),ctx.lineWidth=fontStrokeWidth,ctx.strokeStyle=fontStrokeColor,ctx.strokeText(labels[i],x,y),counts.length===labels.length){var percent=counts[i]/total*100,percentPrecise=percent<1?percent.toPrecision(1):Math.round(percent),progressLabel="".concat(percentPrecise,"% (").concat(counts[i],")");ctx.font=fontSecondary,ctx.fillText(progressLabel,x,y+numberOffset),ctx.strokeText(progressLabel,x,y+numberOffset)}})}},DotBarChart_stateReducer=function stateReducer(state,action){switch(action.type){case"SET_TOOLTIP_CONTENT":case"SET_LAYOUT":return Object(objectSpread.a)({},state,action.payload);case"START_RENDER":return Object(objectSpread.a)({},state,{isRendering:!0});case"FINISH_RENDER":return Object(objectSpread.a)({},state,{isRendering:!1});default:throw new Error("Invalid action type in progressReducer")}};function DotBarChart(_ref){var _ref$bandPaddingInner=_ref.bandPaddingInner,bandPaddingInner=void 0===_ref$bandPaddingInner?.1:_ref$bandPaddingInner,_ref$bandPaddingOuter=_ref.bandPaddingOuter,bandPaddingOuter=void 0===_ref$bandPaddingOuter?.1:_ref$bandPaddingOuter,className=_ref.className,_ref$circleStrokeColo=_ref.circleStrokeColor,circleStrokeColor=void 0===_ref$circleStrokeColo?"#aaa":_ref$circleStrokeColo,circleStrokeWidth=_ref.circleStrokeWidth,colorAccessor=_ref.colorAccessor,_ref$canvasStyle=_ref.canvasStyle,canvasStyle=void 0===_ref$canvasStyle?{background:"transparent"}:_ref$canvasStyle,eventCanvasStyle=_ref.eventCanvasStyle,fontStrokeColor=_ref.fontStrokeColor,fontStrokeWidth=_ref.fontStrokeWidth,groupPropName=_ref.groupPropName,groupKeys=_ref.groupKeys,groupLabels=_ref.groupLabels,_ref$isHangingBar=_ref.isHangingBar,isHangingBar=void 0===_ref$isHangingBar||_ref$isHangingBar,labelColorAccessor=_ref.labelColorAccessor,_ref$labelFont=_ref.labelFont,labelFont=void 0===_ref$labelFont?"bold 1.1rem Arial":_ref$labelFont,_ref$labelFontSeconda=_ref.labelFontSecondary,labelFontSecondary=void 0===_ref$labelFontSeconda?"0.9rem Arial":_ref$labelFontSeconda,nodes=_ref.nodes,_ref$margin=_ref.margin,margin=void 0===_ref$margin?{top:60,right:20,bottom:10,left:20}:_ref$margin,_ref$radiusToPaddingR=_ref.radiusToPaddingRatio,radiusToPaddingRatio=void 0===_ref$radiusToPaddingR?.8:_ref$radiusToPaddingR,uniqueIdPropName=_ref.uniqueIdPropName,wrapperStyle=_ref.wrapperStyle,_useResizeObserver=Object(bundle_esm.a)(),_useResizeObserver2=Object(slicedToArray.a)(_useResizeObserver,3),sizeRef=_useResizeObserver2[0],width=_useResizeObserver2[1],height=_useResizeObserver2[2],_useReducer=Object(react.useReducer)(DotBarChart_stateReducer,{isRendering:!1,nodeCount:0,tooltipContent:"",tooltipContentWidth:0,tooltipOffset:[0,0],radiusWithPadding:1,radiusAccessor:function radiusAccessor(){return 1},xAccessor:function xAccessor(){return 0},xScale:function xScale(){return 0},yAccessor:function yAccessor(){return 0}}),_useReducer2=Object(slicedToArray.a)(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];Object(react.useEffect)(function(){var _computeLayout=computeLayout({bandPaddingInner:bandPaddingInner,bandPaddingOuter:bandPaddingOuter,isHangingBar:isHangingBar,groupIndexPropName:groupIndexPropName,groupKeys:groupKeys,groupPropName:groupPropName,margin:margin,nodeCount:nodes.length,width:width,height:height,radiusToPaddingRatio:radiusToPaddingRatio}),radiusWithPadding=_computeLayout.radiusWithPadding,radiusAccessor=_computeLayout.radiusAccessor,xAccessor=_computeLayout.xAccessor,xScale=_computeLayout.xScale,yAccessor=_computeLayout.yAccessor;dispatch({type:"SET_LAYOUT",payload:{nodeCount:nodes.length,radiusWithPadding:radiusWithPadding,radiusAccessor:radiusAccessor,xAccessor:xAccessor,xScale:xScale,yAccessor:yAccessor}})},[width,height,groupKeys,isHangingBar,state.nodeCount]);var _computeIndexedNodes=computeIndexedNodes({groupPropName:groupPropName,groupKeys:groupKeys,nodes:nodes,uniqueIdPropName:uniqueIdPropName}),colorToNode=_computeIndexedNodes.colorToNode,indexed=_computeIndexedNodes.nodes,groupCounts=_computeIndexedNodes.groupCounts,groupIndexPropName=_computeIndexedNodes.groupIndexPropName,nodeIdToColor=_computeIndexedNodes.nodeIdToColor,eventCanvasDrawFunction=drawDotBarFunction({nodes:indexed,colorAccessor:function colorAccessor(node){return nodeIdToColor[node[uniqueIdPropName]]||""},radiusAccessor:function radiusAccessor(){return state.radiusWithPadding},strokeColorAccessor:function strokeColorAccessor(node){return nodeIdToColor[node[uniqueIdPropName]]||""},strokeWidth:0,xAccessor:state.xAccessor,yAccessor:state.yAccessor}),dotBarDraw=drawDotBarFunction({nodes:indexed,colorAccessor:colorAccessor,radiusAccessor:state.radiusAccessor,strokeColorAccessor:function strokeColorAccessor(){return circleStrokeColor},strokeWidth:circleStrokeWidth,xAccessor:state.xAccessor,yAccessor:state.yAccessor}),labelDraw=drawLabelsFunction({colorAccessor:labelColorAccessor||colorAccessor,font:labelFont,fontSecondary:labelFontSecondary,fontStrokeColor:fontStrokeColor,fontStrokeWidth:fontStrokeWidth,groupCounts:groupCounts,groupKeys:groupKeys,labels:groupLabels,xAccessor:function xAccessor(group){return state.xScale(group)-state.xScale.step()*state.xScale.paddingOuter()+state.xScale.bandwidth()/2},yAccessor:function yAccessor(){return margin.top/3},numberOffset:margin.top/3+5});return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(ResponsiveCanvas.a,{canvasPixelRatio:2,canvasDrawFunction:function drawFunction(ctx){dispatch({type:"START_RENDER"}),dotBarDraw(ctx),labelDraw(ctx),dispatch({type:"FINISH_RENDER"})},canvasStyle:canvasStyle,eventCanvasStyle:eventCanvasStyle,eventCanvasDrawFunction:eventCanvasDrawFunction,height:height,mousemove:function mousemove(e){var event=e,hiddenCtx=event.target.getContext("2d"),rgb=hiddenCtx.getImageData(2*event.nativeEvent.offsetX,2*event.nativeEvent.offsetY,1,1).data,node=colorToNode["rgb(".concat(rgb[0],",").concat(rgb[1],",").concat(rgb[2],")")];if(node){var renderProps=Object(omit.a)(node,[groupIndexPropName]),tooltipContentWidth=Object(reduce.a)(renderProps,function(maxWidth,value,key){hiddenCtx.font=labelFontSecondary;var width=hiddenCtx.measureText("".concat(value,": ").concat(key)).width;return width>maxWidth?width+6:maxWidth},0);dispatch({type:"SET_TOOLTIP_CONTENT",payload:{tooltipContent:Object(map.a)(renderProps,function(value,key){return react_default.a.createElement("p",{style:{margin:"2px",textAlign:"center"},key:key},key,": ",value)}),tooltipContentWidth:tooltipContentWidth,tooltipOffset:[event.pageX,event.pageY]}})}else dispatch({type:"SET_TOOLTIP_CONTENT",payload:{tooltipContent:"",tooltipContentWidth:0,tooltipOffset:state.tooltipContent}})},width:width,wrapperClassName:className,wrapperSizeRef:sizeRef,wrapperStyle:wrapperStyle}),react_default.a.createElement(Tooltip,{borderWidth:state.radiusWithPadding,content:state.tooltipContent,opacity:""===state.tooltipContent?0:.85,contentWidth:state.tooltipContentWidth,left:state.tooltipOffset[0],font:labelFontSecondary,padding:3,top:state.tooltipOffset[1]}))}DotBarChart.__docgenInfo={description:"",methods:[],displayName:"DotBarChart"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DotBarChart/DotBarChart.js"]={name:"DotBarChart",docgenInfo:DotBarChart.__docgenInfo,path:"src/components/DotBarChart/DotBarChart.js"});var demoDataGenerator=__webpack_require__(30);__webpack_require__.d(__webpack_exports__,"a",function(){return JobStatus});var JobStatus_jobStateReducer=function jobStateReducer(state,action){switch(action.type){case"SET_NODES":return Object(objectSpread.a)({},state,{nodes:action.payload});case"SET_GROUP_METADATA":var _action$payload=action.payload,colorPropName=_action$payload.colorPropName,groupMetadataArray=_action$payload.groupMetadataArray,groupPropName=_action$payload.groupPropName,labelPropName=_action$payload.labelPropName,groupMetadata=groupMetadataArray.reduce(function(acc,meta){return Object(objectSpread.a)({},acc,Object(defineProperty.a)({},meta[groupPropName],meta))},{}),colorRange=groupMetadataArray.map(function(meta){return meta[colorPropName]}),groupKeys=groupMetadataArray.map(function(meta){return meta[groupPropName]}),groupLabels=groupMetadataArray.map(function(meta){return meta[labelPropName]}),colorScale=Object(src.c)().domain(groupKeys).range(colorRange);return Object(objectSpread.a)({},state,{colorAccessor:function colorAccessor(node){return Object(has.a)(node,groupPropName)?colorScale(node[groupPropName]):colorScale(node)},groupMetadata:groupMetadata,groupKeys:groupKeys,groupLabels:groupLabels});default:throw new Error("Invalid action type in jobStateReducer")}};function JobStatus(_ref){var canvasStyle=_ref.canvasStyle,circleStrokeColor=_ref.circleStrokeColor,circleStrokeWidth=_ref.circleStrokeWidth,className=_ref.className,_ref$colorPropName=_ref.colorPropName,colorPropName=void 0===_ref$colorPropName?"color":_ref$colorPropName,eventCanvasStyle=_ref.eventCanvasStyle,fontStrokeColor=_ref.fontStrokeColor,fontStrokeWidth=_ref.fontStrokeWidth,_ref$groupPropName=_ref.groupPropName,groupPropName=void 0===_ref$groupPropName?"group_id":_ref$groupPropName,labelColorAccessor=_ref.labelColorAccessor,_ref$labelPropName=_ref.labelPropName,labelPropName=void 0===_ref$labelPropName?"label":_ref$labelPropName,_ref$labelFont=_ref.labelFont,labelFont=void 0===_ref$labelFont?"bold 1.1em Arial":_ref$labelFont,_ref$labelFontSeconda=_ref.labelFontSecondary,labelFontSecondary=void 0===_ref$labelFontSeconda?"0.9em Arial":_ref$labelFontSeconda,_ref$margin=_ref.margin,margin=void 0===_ref$margin?{top:60,right:20,bottom:10,left:20}:_ref$margin,nodesMetadataPromise=_ref.nodesMetadataPromise,_ref$pollingInterval=_ref.pollingInterval,pollingInterval=void 0===_ref$pollingInterval?500:_ref$pollingInterval,uniqueIdPropName=_ref.uniqueIdPropName,_ref$wrapperStyle=_ref.wrapperStyle,wrapperStyle=void 0===_ref$wrapperStyle?{height:"100%",width:"100%"}:_ref$wrapperStyle,_useReducer=Object(react.useReducer)(JobStatus_jobStateReducer,{colorAccessor:function colorAccessor(){return"#fff"},groupMetadata:{},groupKeys:[],groupLabels:[],nodes:[]}),_useReducer2=Object(slicedToArray.a)(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];return Object(react.useEffect)(function(){function _fetchData(){return(_fetchData=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee(){var _ref2,groupMetadataArray,nodes;return regenerator_default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,nodesMetadataPromise();case 2:_ref2=_context.sent,groupMetadataArray=_ref2.groupMetadataArray,nodes=_ref2.nodes,dispatch({type:"SET_GROUP_METADATA",payload:{colorPropName:colorPropName,groupPropName:groupPropName,groupMetadataArray:groupMetadataArray,labelPropName:labelPropName}}),dispatch({type:"SET_NODES",payload:nodes});case 7:case"end":return _context.stop()}},_callee)}))).apply(this,arguments)}!function fetchData(){return _fetchData.apply(this,arguments)}()},[]),Object(useInterval.a)(function(){dispatch({type:"SET_NODES",payload:Object(demoDataGenerator.b)(state.nodes,state.groupKeys,groupPropName)})},pollingInterval),react_default.a.createElement(DotBarChart,{canvasStyle:canvasStyle,circleStrokeColor:circleStrokeColor,circleStrokeWidth:circleStrokeWidth,className:className,colorAccessor:state.colorAccessor,eventCanvasStyle:eventCanvasStyle,fontStrokeColor:fontStrokeColor,fontStrokeWidth:fontStrokeWidth,groupPropName:groupPropName,groupCounts:state.groupKeys.length,groupKeys:state.groupKeys,groupLabels:state.groupLabels,labelColorAccessor:labelColorAccessor,labelFont:labelFont,labelFontSecondary:labelFontSecondary,nodes:state.nodes,margin:margin,uniqueIdPropName:uniqueIdPropName,wrapperStyle:wrapperStyle})}JobStatus.__docgenInfo={description:"",methods:[],displayName:"JobStatus"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/containers/JobStatus/JobStatus.js"]={name:"JobStatus",docgenInfo:JobStatus.__docgenInfo,path:"src/containers/JobStatus/JobStatus.js"})},68:function(module,__webpack_exports__,__webpack_require__){"use strict";var objectSpread=__webpack_require__(2),react=__webpack_require__(0),react_default=__webpack_require__.n(react);function Canvas2d(_ref){var click=_ref.click,_ref$drawFunction=_ref.drawFunction,drawFunction=void 0===_ref$drawFunction?function(){}:_ref$drawFunction,_ref$height=_ref.height,height=void 0===_ref$height?500:_ref$height,_ref$width=_ref.width,width=void 0===_ref$width?500:_ref$width,_ref$canvasPixelRatio=_ref.canvasPixelRatio,canvasPixelRatio=void 0===_ref$canvasPixelRatio?2:_ref$canvasPixelRatio,mousedown=_ref.mousedown,mousemove=_ref.mousemove,mouseup=_ref.mouseup,_ref$style=_ref.style,style=void 0===_ref$style?{}:_ref$style,touchend=_ref.touchend,touchmove=_ref.touchmove,touchstart=_ref.touchstart,canvasRef=function useCanvas(draw){var ratio=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,canvasRef=Object(react.useRef)(null);return Object(react.useEffect)(function(){var canvas=canvasRef.current,ctx=canvas.getContext("2d"),animationFrameId=requestAnimationFrame(function renderFrame(){ctx.clearRect(0,0,canvas.width,canvas.height),ctx.save(),ctx.scale(ratio,ratio),draw(ctx),ctx.restore()});return function(){return cancelAnimationFrame(animationFrameId)}},[draw]),canvasRef}(drawFunction,canvasPixelRatio),sizeInPixels={width:"".concat(width,"px"),height:"".concat(height,"px")};return react_default.a.createElement("canvas",{width:width*canvasPixelRatio,height:height*canvasPixelRatio,style:Object(objectSpread.a)({},sizeInPixels,style),ref:canvasRef,onTouchStart:touchstart,onTouchMove:touchmove,onTouchEnd:touchend,onMouseMove:mousemove,onMouseDown:mousedown,onMouseUp:mouseup,onClick:click})}__webpack_require__.d(__webpack_exports__,"a",function(){return Canvas2d}),Canvas2d.__docgenInfo={description:"",methods:[],displayName:"Canvas2d"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Canvas/Canvas2d.js"]={name:"Canvas2d",docgenInfo:Canvas2d.__docgenInfo,path:"src/components/Canvas/Canvas2d.js"})},80:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return useInterval});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function useInterval(callback,delay){var savedCallback=Object(react__WEBPACK_IMPORTED_MODULE_0__.useRef)();Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){savedCallback.current=callback},[callback]),Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){if(null!==delay){var id=setInterval(function tick(){savedCallback.current()},delay);return function(){return clearInterval(id)}}},[delay])}}},[[210,1,2]]]);
//# sourceMappingURL=main.87d55e36d5a3b0762532.bundle.js.map